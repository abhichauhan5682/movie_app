{"ast":null,"code":"var _jsxFileName = \"C:\\\\Web Development Codes\\\\Projects\\\\movie_app_original\\\\client\\\\src\\\\components\\\\movie\\\\likedislike.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport { Tooltip } from 'antd';\nimport { LikeOutlined, DislikeOutlined, LikeFilled, DislikeFilled } from '@ant-design/icons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst LikeDislike = props => {\n  _s();\n\n  const [Likes, setLikes] = useState(0);\n  const [Dislikes, setDislikes] = useState(0);\n  const [LikeAction, setLikeAction] = useState(false);\n  const [DislikeAction, setDislikeAction] = useState(false);\n  let variable = {};\n\n  if (props.movie) {\n    variable = {\n      movieId: props.movieId,\n      userId: props.userId\n    };\n  } else {\n    variable = {\n      commentId: props.commentId,\n      userId: props.userId\n    };\n  }\n\n  useEffect(async () => {\n    const res = await axios.post('/api/like/getlikes', variable);\n\n    if (res.data.success) {\n      setLikes(res.data.likes.length);\n      res.data.likes.map(like => {\n        if (like.userId === props.userId) {\n          setLikeAction(true);\n          console.log(\"user has liked it\");\n        }\n      });\n    } else {\n      console.log(res.data.err);\n    }\n\n    const res1 = await axios.post('/api/like/getdislikes', variable);\n\n    if (res1.data.success) {\n      setDislikes(res1.data.dislikes.length);\n      res1.data.dislikes.map(dislike => {\n        if (dislike.userId === props.userId) {\n          console.log(\"disliked\");\n          setDislikeAction(true);\n        }\n      });\n    } else {\n      console.log(res.data.err);\n    }\n  }, []);\n\n  const handleClick = async () => {\n    if (props.auth.isAuth === false || props.userId === null) alert(\"please login to like this post\");\n\n    if (props.auth.isAuth) {\n      if (LikeAction === false) {\n        const res = await axios.post('/api/like/uplike', variable);\n\n        if (res.data.success === true) {\n          setLikes(Likes + 1);\n          setLikeAction(true);\n\n          if (DislikeAction == true) {\n            setDislikeAction(false);\n            setDislikes(Dislikes - 1);\n          }\n        } else {\n          alert(\"failed to like\");\n        }\n      } else {\n        const res = await axios.post('/api/like/unlike', variable);\n\n        if (res.data.success === true) {\n          setLikes(Likes - 1);\n          setLikeAction(false);\n        } else {\n          alert(\"Failed to decrease the like\");\n        }\n      }\n    }\n  };\n\n  const handleDislikeClik = async () => {\n    if (props.auth.isAuth === false || props.userId === null) alert(\"please login to like this post\");\n\n    if (props.auth.isAuth) {\n      if (DislikeAction === false) {\n        const res = await axios.post('/api/like/updislike', variable);\n\n        if (res.data.success === true) {\n          setDislikes(Dislikes + 1);\n          setDislikeAction(true);\n\n          if (LikeAction === true) {\n            setLikes(Likes - 1);\n            setLikeAction(false);\n          }\n        } else {\n          alert(\"failed to dislike\");\n        }\n      } else {\n        const res = await axios.post('/api/like/undislike', variable);\n\n        if (res.data.success === true) {\n          setDislikeAction(false);\n          setDislikes(Dislikes - 1);\n        } else {\n          alert(\"failed to decrease the dislike\");\n        }\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      float: \"left\",\n      display: \"flex\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: handleClick,\n        children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"Like\",\n          children: LikeAction == false ? /*#__PURE__*/_jsxDEV(LikeOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 45\n          }, this) : /*#__PURE__*/_jsxDEV(LikeFilled, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 62\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            paddingLeft: \"2px\",\n            cursor: 'auto'\n          },\n          children: Likes\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this)\n    }, 'comment-basic-like', false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: handleDislikeClik,\n        children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"Dislike\",\n          children: DislikeAction == false ? /*#__PURE__*/_jsxDEV(DislikeOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 47\n          }, this) : /*#__PURE__*/_jsxDEV(DislikeFilled, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 67\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            paddingLeft: \"2px\",\n            cursor: 'auto'\n          },\n          children: Dislikes\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this)\n    }, \"comment-basic-dislike\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 9\n  }, this);\n};\n\n_s(LikeDislike, \"pJ6njp7PfeXe/s4Tn4uAiZeOw6w=\");\n\n_c = LikeDislike;\nLikeDislike.propTypes = {\n  auth: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  auth: state.auth\n});\n\nexport default connect(mapStateToProps, {})(LikeDislike);\n\nvar _c;\n\n$RefreshReg$(_c, \"LikeDislike\");","map":{"version":3,"sources":["C:/Web Development Codes/Projects/movie_app_original/client/src/components/movie/likedislike.js"],"names":["React","useEffect","useState","PropTypes","connect","axios","Tooltip","LikeOutlined","DislikeOutlined","LikeFilled","DislikeFilled","LikeDislike","props","Likes","setLikes","Dislikes","setDislikes","LikeAction","setLikeAction","DislikeAction","setDislikeAction","variable","movie","movieId","userId","commentId","res","post","data","success","likes","length","map","like","console","log","err","res1","dislikes","dislike","handleClick","auth","isAuth","alert","handleDislikeClik","float","display","paddingLeft","cursor","propTypes","object","isRequired","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from 'react-redux';\r\nimport axios from 'axios';\r\nimport { Tooltip } from 'antd';\r\nimport {LikeOutlined,DislikeOutlined,LikeFilled,DislikeFilled} from '@ant-design/icons';\r\n\r\n\r\nconst LikeDislike = props => {\r\n    const[Likes,setLikes]=useState(0);\r\n    const[Dislikes,setDislikes]=useState(0);\r\n    const [LikeAction, setLikeAction] = useState(false);\r\n    const [DislikeAction, setDislikeAction] = useState(false);\r\n    let variable={};\r\n    \r\n    if(props.movie){\r\n        variable={movieId:props.movieId,userId:props.userId}\r\n    }else{\r\n        variable={commentId:props.commentId,userId:props.userId}\r\n    }\r\n    useEffect(async ()=>{\r\n        const res=await axios.post('/api/like/getlikes',variable);\r\n        if(res.data.success){\r\n            setLikes(res.data.likes.length);\r\n            res.data.likes.map(like=>{\r\n                if(like.userId === props.userId){\r\n                    setLikeAction(true);\r\n                    console.log(\"user has liked it\");\r\n                }\r\n            })\r\n        }else{\r\n            console.log(res.data.err);\r\n        }\r\n        \r\n        const res1=await axios.post('/api/like/getdislikes',variable);\r\n        if(res1.data.success){\r\n            setDislikes(res1.data.dislikes.length);\r\n            res1.data.dislikes.map((dislike)=>{\r\n                if(dislike.userId=== props.userId){\r\n                    console.log(\"disliked\");\r\n                    setDislikeAction(true);\r\n                }\r\n            })\r\n        }else{\r\n            console.log(res.data.err);\r\n        }\r\n\r\n\r\n    },[]);\r\n    const handleClick=async ()=>{\r\n       if(props.auth.isAuth===false||props.userId===null) alert(\"please login to like this post\");\r\n       if(props.auth.isAuth){\r\n            if(LikeAction===false){\r\n                const res=await axios.post('/api/like/uplike',variable);\r\n                if(res.data.success===true){\r\n                    setLikes(Likes+1);\r\n                    setLikeAction(true);\r\n                    if(DislikeAction==true){\r\n                        setDislikeAction(false);\r\n                        setDislikes(Dislikes-1);\r\n                    }\r\n                }else{\r\n                    alert(\"failed to like\");\r\n                }\r\n            }else{\r\n                const res=await axios.post('/api/like/unlike',variable)\r\n                if(res.data.success===true){\r\n                    setLikes(Likes-1);\r\n                    setLikeAction(false);\r\n                }else{\r\n                    alert(\"Failed to decrease the like\");\r\n                }\r\n            }\r\n        }\r\n    }\r\n    const handleDislikeClik=async ()=>{\r\n        if(props.auth.isAuth===false||props.userId===null) alert(\"please login to like this post\");\r\n        if(props.auth.isAuth){\r\n            if(DislikeAction===false){\r\n                const res=await axios.post('/api/like/updislike',variable);\r\n                if(res.data.success===true){\r\n                    setDislikes(Dislikes+1);\r\n                    setDislikeAction(true);\r\n                    if(LikeAction===true){\r\n                        setLikes(Likes-1);\r\n                        setLikeAction(false);\r\n                    }\r\n                }else{\r\n                    alert(\"failed to dislike\")\r\n                }\r\n            }else{\r\n                const res=await axios.post('/api/like/undislike',variable);\r\n                if(res.data.success===true){\r\n                    setDislikeAction(false);\r\n                    setDislikes(Dislikes-1);\r\n                }else{\r\n                    alert(\"failed to decrease the dislike\");\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return (\r\n        <div style={{float:\"left\",display:\"flex\"}}>\r\n            \r\n            <span key='comment-basic-like'>\r\n            \r\n                <div onClick={handleClick}>\r\n                    <Tooltip title='Like'>\r\n                        {LikeAction==false ?<LikeOutlined />:<LikeFilled />}\r\n                    </Tooltip>\r\n                    <span style={{paddingLeft:\"2px\",cursor:'auto'}}>{Likes}</span>\r\n                </div>\r\n            </span>\r\n            <span key=\"comment-basic-dislike\">\r\n                <div onClick={handleDislikeClik}>\r\n                    <Tooltip title='Dislike'>\r\n                        {DislikeAction==false?<DislikeOutlined />:<DislikeFilled />}\r\n                    </Tooltip>\r\n                    <span style={{paddingLeft:\"2px\",cursor:'auto'}}>{Dislikes}</span>\r\n                </div>\r\n            </span>\r\n        </div>\r\n    )\r\n}\r\n\r\nLikeDislike.propTypes = {\r\nauth:PropTypes.object.isRequired,\r\n}\r\n\r\nconst mapStateToProps=state=>({\r\nauth:state.auth\r\n});\r\n\r\nexport default connect(mapStateToProps,{})(LikeDislike);\r\n"]},"metadata":{},"sourceType":"module"}